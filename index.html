<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chocolate Date ğŸ’•</title>

<style>
*{
  box-sizing:border-box;
  font-family:'Comic Sans MS',cursive;
}

body{
  margin:0;
  height:100vh;
  overflow:hidden;

  /* ğŸ”¹ BACKGROUND IMAGE PLACEHOLDER ğŸ”¹ */
  background:url("background.png") center/cover no-repeat;
}

/* ---------- CORE ---------- */
#app{
  position:relative;
  width:100%;
  height:100%;
}

.center{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* ---------- POPUPS ---------- */
.popup{
  background:linear-gradient(#6b3a1e,#3b1c08);
  color:#fff;
  padding:28px;
  border-radius:22px;
  text-align:center;
  width:90%;
  max-width:420px;
  box-shadow:0 12px 30px rgba(0,0,0,.6);
}

button{
  background:#ffb347;
  border:none;
  padding:12px 22px;
  margin:10px;
  border-radius:16px;
  font-size:16px;
  cursor:pointer;
}

/* ---------- FLOATING EMOJIS ---------- */
.float{
  position:absolute;
  font-size:22px;
  animation:floatUp 3s linear;
}
@keyframes floatUp{
  from{opacity:1;transform:translateY(0)}
  to{opacity:0;transform:translateY(-260px)}
}

/* ---------- ROAD ---------- */
#road{
  position:absolute;
  inset:0;
  display:none;
  background:linear-gradient(#3b1c08 55%, #444 55%);
}

#lane{
  position:absolute;
  bottom:130px;
  width:100%;
  height:10px;
  background:repeating-linear-gradient(
    to right,
    #fff 0 40px,
    transparent 40px 80px
  );
}

/* ---------- VEHICLE ---------- */
#vehicle{
  position:absolute;
  bottom:160px;
  left:10%;
  width:220px;
  transition:left .4s linear;
}

/* ---------- SHOP ---------- */
#shop{
  position:absolute;
  bottom:160px;
  left:75%;
  width:220px;
  display:none;
}

/* ---------- MENU ---------- */
#menuOverlay{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  align-items:center;
  justify-content:center;
}
#menuOverlay img{
  width:90%;
  max-width:420px;
  border-radius:20px;
}

/* ---------- FINAL MESSAGE ---------- */
#finalCard{
  position:absolute;
  bottom:160px;
  left:60%;
  transform:translateX(-50%);
  width:320px;
  display:none;
}
#finalCard img{
  width:100%;
  border-radius:20px;
  filter:blur(6px);
}
#finalOverlay{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:20px;
  color:#fff;
  font-size:18px;
  cursor:pointer;
}
</style>
</head>

<body>
<div id="app"></div>

<script>
const app = document.getElementById("app");

let stage = 1;
let pos = 10;
let vehicleType = "bike";
let finalTriggerPos = 80;

/* ---------- HELPERS ---------- */
function clear(){
  app.innerHTML="";
}

function floats(text,count){
  for(let i=0;i<count;i++){
    const f=document.createElement("div");
    f.className="float";
    f.innerText=text;
    f.style.left=Math.random()*100+"%";
    f.style.top=Math.random()*100+"%";
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),3000);
  }
}

/* ---------- STAGE 1 ---------- */
function showDatePopup(){
  clear();
  app.innerHTML=`
    <div class="center">
      <div class="popup">
        <h2>Hi.. Babyyy ğŸ’•</h2>
        <p>Chocolate Date pe chaloge ???</p>
        <button onclick="acceptDate()">Yes</button>
        <button onclick="acceptDate()">Chaloooo</button>
      </div>
    </div>`;
}

function acceptDate(){
  floats("yeyeyeyyeye ğŸ˜‹ğŸ˜‹ğŸ˜‹ğŸ˜‹",60);
  setTimeout(showVehicleChoice,1200);
}

/* ---------- STAGE 2 ---------- */
function showVehicleChoice(){
  clear();
  app.innerHTML=`
    <div class="center">
      <div class="popup">
        <h3>Kis par chalna h?</h3>
        <button onclick="startRoad('car')">ğŸš— Car</button>
        <button onclick="startRoad('bike')">ğŸï¸ Bike</button>
      </div>
    </div>`;
}

/* ---------- STAGE 3 ---------- */
function startRoad(type){
  vehicleType = type;
  pos = 10;
  stage = 3;

  clear();
  app.innerHTML=`
    <div id="road">
      <div id="lane"></div>

      <img id="shop" src="shop.png">
      <img id="vehicle" src="${type}.png">

      <button style="position:absolute;bottom:20px;right:20px"
        onclick="drive()">Drive â¡ï¸</button>
    </div>

    <div id="menuOverlay" onclick="closeMenu()">
      <img src="menu.png">
    </div>

    <div id="finalCard">
      <img id="finalImg" src="loveletter.png">
      <div id="finalOverlay" onclick="revealFinal()">
        ğŸ’Œ Tap to read something from my heart ğŸ’•
      </div>
    </div>
  `;

  document.getElementById("road").style.display="block";
}

/* ---------- DRIVE ---------- */
function drive(){
  pos += 5;
  document.getElementById("vehicle").style.left = pos + "%";

  /* reach shop */
  if(pos > 50 && stage === 3){
    document.getElementById("shop").style.display = "block";
  }

  /* open menu */
  if(pos > 65 && stage === 3){
    stage = 4;
    document.getElementById("menuOverlay").style.display = "flex";
  }

  /* final message */
  if(pos > finalTriggerPos && stage === 5){
    stage = 6;
    document.getElementById("finalCard").style.display = "block";
  }
}

/* ---------- MENU ---------- */
function closeMenu(){
  document.getElementById("menuOverlay").style.display="none";
  floats("ğŸ’‹ğŸ«",80);

  stage = 5;
  pos = 45; // ğŸ”¹ ensures extra driving before final message
  document.getElementById("vehicle").style.left = pos + "%";
}

/* ---------- FINAL REVEAL ---------- */
function revealFinal(){
  document.getElementById("finalImg").style.filter="none";
  document.getElementById("finalOverlay").style.display="none";
}

/* ---------- START ---------- */
showDatePopup();
</script>
</body>
</html>
