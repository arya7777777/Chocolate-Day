<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chocolate Date üíï</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Comic Sans MS',cursive;
}

body{
  width:100vw;
  height:100vh;
  overflow:hidden;
  background:url("background.png") center/cover no-repeat;
}

/* ---------- CORE ---------- */
#app{
  position:relative;
  width:100%;
  height:100%;
}

.center{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* ---------- POPUPS ---------- */
.popup{
  background:rgba(60,30,15,.95);
  color:#fff;
  padding:5vw;
  border-radius:4vw;
  width:90vw;
  max-width:420px;
  text-align:center;
}

button{
  margin-top:3vw;
  padding:3vw 6vw;
  border:none;
  border-radius:4vw;
  font-size:4vw;
  background:#ffb347;
}

/* ---------- FLOATING ---------- */
.float{
  position:absolute;
  font-size:5vw;
  animation:floatUp 3s linear;
}
@keyframes floatUp{
  from{opacity:1;transform:translateY(0)}
  to{opacity:0;transform:translateY(-40vh)}
}

/* ---------- ROAD ---------- */
#road{
  position:absolute;
  inset:0;
}

#lane{
  position:absolute;
  bottom:22vh;
  width:100%;
  height:1.5vh;
  background:repeating-linear-gradient(
    to right,
    #fff 0 6vw,
    transparent 6vw 12vw
  );
}

/* ---------- VEHICLE ---------- */
#vehicle{
  position:absolute;
  bottom:24vh;
  left:10vw;
  width:40vw;
  max-width:220px;
  height:auto;
  will-change:transform;
  transform:translateX(0);
}

/* ---------- SHOP ---------- */
#shop{
  position:absolute;
  bottom:24vh;
  left:75vw;
  width:35vw;
  max-width:180px;
  display:none;
}

/* ---------- MENU ---------- */
#menuOverlay{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  align-items:center;
  justify-content:center;
}
#menuOverlay img{
  width:90vw;
  max-width:420px;
  border-radius:4vw;
}

/* ---------- FINAL MESSAGE ---------- */
#finalCard{
  position:absolute;
  bottom:24vh;
  left:50%;
  transform:translateX(-50%);
  width:80vw;
  max-width:420px;
  display:none;
}
#finalCard img{
  width:100%;
  border-radius:4vw;
  filter:blur(6px);
}
#finalOverlay{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  color:white;
  padding:4vw;
  font-size:4vw;
}
</style>
</head>

<body>
<div id="app"></div>

<script>
const app = document.getElementById("app");

let pos = 0;
let shopShown = false;
let menuDone = false;
let finalShown = false;

/* ---------- HELPERS ---------- */
function clear(){
  app.innerHTML="";
}

function floatEmojis(text,count){
  for(let i=0;i<count;i++){
    const f=document.createElement("div");
    f.className="float";
    f.innerText=text;
    f.style.left=Math.random()*100+"vw";
    f.style.top=Math.random()*100+"vh";
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),3000);
  }
}

/* ---------- STAGE 1 ---------- */
function showDatePopup(){
  clear();
  app.innerHTML=`
    <div class="center">
      <div class="popup">
        <h2>Hi.. Babyyy üíï</h2>
        <p>Chocolate Date pe chaloge ???</p>
        <button onclick="acceptDate()">Yes</button>
        <button onclick="acceptDate()">Chaloooo</button>
      </div>
    </div>`;
}

function acceptDate(){
  floatEmojis("yeyeyeyyeye üòãüòãüòãüòã",60);
  setTimeout(showVehicleChoice,1200);
}

/* ---------- STAGE 2 ---------- */
function showVehicleChoice(){
  clear();
  app.innerHTML=`
    <div class="center">
      <div class="popup">
        <h3>Kis par chalna h?</h3>
        <button onclick="startRoad('car')">üöó Car</button>
        <button onclick="startRoad('bike')">üèçÔ∏è Bike</button>
      </div>
    </div>`;
}

/* ---------- ROAD ---------- */
function startRoad(type){
  pos = 0;
  shopShown = false;
  menuDone = false;
  finalShown = false;

  clear();
  app.innerHTML=`
    <div id="road">
      <div id="lane"></div>
      <img id="shop" src="shop.png">
      <img id="vehicle" src="${type}.png">
      <button style="position:absolute;bottom:5vh;right:5vw"
        onclick="drive()">Drive ‚û°Ô∏è</button>
    </div>

    <div id="menuOverlay" onclick="closeMenu()">
      <img src="menu.png">
    </div>

    <div id="finalCard">
      <img id="finalImg" src="loveletter.png">
      <div id="finalOverlay" onclick="revealFinal()">
        üíå Tap to read something from my heart üíï
      </div>
    </div>
  `;
}

/* ---------- DRIVE ---------- */
function drive(){
  pos += 5;
  document.getElementById("vehicle")
    .style.transform = `translateX(${pos}vw)`;

  if(pos > 40 && !shopShown){
    document.getElementById("shop").style.display="block";
    shopShown = true;
  }

  if(pos > 55 && !menuDone){
    document.getElementById("menuOverlay").style.display="flex";
    menuDone = true;
  }

  if(pos > 85 && menuDone && !finalShown){
    document.getElementById("finalCard").style.display="block";
    finalShown = true;
  }
}

/* ---------- MENU ---------- */
function closeMenu(){
  document.getElementById("menuOverlay").style.display="none";
  floatEmojis("üíãüç´",80);
}

/* ---------- FINAL ---------- */
function revealFinal(){
  document.getElementById("finalImg").style.filter="none";
  document.getElementById("finalOverlay").style.display="none";
}

/* START */
showDatePopup();
</script>
</body>
</html>
